<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hellscape Hustle  | Home</title>
    <link rel="stylesheet" href="../styles.css" />
</head>
<body class="home">
    <style>
        /* Home-only minimal layout overrides (duplicated here so it loads when injected) */
        body.home .main { max-width: none; padding: min(5vh, 40px) 12px 48px; }
        .intro { text-align: center; font-size: clamp(1rem, 2.3vw, 1.35rem); margin: 8px auto 18px; opacity: 0.95; }
        .gallery { display: grid; gap: 10px; justify-items: center; }
        .gallery-stage { position: relative; width: min(1200px, calc(100vw - 24px)); aspect-ratio: 16 / 9; background: #000; border-radius: 10px; overflow: hidden; border: 1px solid rgba(245, 252, 182, 0.08); display: grid; place-items: center; cursor: pointer; }
        .media { width: 100%; height: 100%; object-fit: contain; display: block; background: #000; }
        .gallery-arrow { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0, 0, 0, 0.5); color: #fff; border: none; border-radius: 999px; width: 42px; height: 42px; font-size: 1.35rem; cursor: pointer; z-index: 2; }
        .gallery-arrow.left { left: 10px; } .gallery-arrow.right { right: 10px; }
        .gallery-card { width: min(1200px, calc(100vw - 24px)); display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 10px; padding: 2px 4px; }
        .gallery-title { margin: 0; font-size: clamp(1.05rem, 2.6vw, 1.25rem); color: var(--accent); font-weight: 700; }
        .gallery-desc { margin: 0; opacity: 0.9; font-size: clamp(0.9rem, 2.2vw, 1rem); }
        .gallery-open { appearance: none; background: transparent; color: var(--accent); border: 1px solid rgba(245, 252, 182, 0.35); border-radius: 8px; padding: 8px 12px; font-weight: 700; cursor: pointer; transition: background 180ms ease, border-color 180ms ease, color 180ms ease; white-space: nowrap; }
        .gallery-open:hover, .gallery-open:focus-visible { background: rgba(245, 252, 182, 0.12); color: #fff; border-color: rgba(245, 252, 182, 0.5); }
        @media (max-width: 520px) { .gallery-arrow { width: 48px; height: 48px; font-size: 1.5rem; } }
    </style>

    <main class="main">
        <p class="intro">Crushing victories in the city of sin and wins - Hellscape Hustle</p>

        <section class="gallery" aria-label="Featured">
            <div class="gallery-stage" id="galleryStage" role="link" tabindex="0" aria-label="Open selected item">
                <button class="gallery-arrow left" type="button" aria-label="Previous">&#8592;</button>
                <!-- media element injected by navigation.js initializer -->
                <button class="gallery-arrow right" type="button" aria-label="Next">&#8594;</button>
            </div>

            <div class="gallery-card" aria-live="polite">
                <div>
                    <h2 class="gallery-title" id="galleryTitle">&nbsp;</h2>
                    <p class="gallery-desc" id="galleryDesc">&nbsp;</p>
                </div>
                <button class="gallery-open" id="galleryOpen" type="button">Open</button>
            </div>
        </section>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
    

    // Initialize any interactive components inside injected pages
    function initializeInjectedPage(page) {
        // Home page gallery init
        if (page.content === 'pages/home.html') {
            const stage = this.mainContent.querySelector('#galleryStage');
            const titleEl = this.mainContent.querySelector('#galleryTitle');
            const descEl = this.mainContent.querySelector('#galleryDesc');
            const openBtn = this.mainContent.querySelector('#galleryOpen');
            const prevBtn = this.mainContent.querySelector('.gallery-arrow.left');
            const nextBtn = this.mainContent.querySelector('.gallery-arrow.right');
            if (!stage || !titleEl || !descEl || !openBtn || !prevBtn || !nextBtn) return;

            // Size tweaks: make the gallery noticeably smaller
            stage.style.width = 'min(720px, 92vw)';
            const card = this.mainContent.querySelector('.gallery-card');
            if (card) card.style.width = 'min(720px, 92vw)';

            const items = [
                { type: 'image', src: '/media/graphics/HellHust-Flyer(1).png', link: 'pages/gameplay.html', title: 'Gameplay', desc: 'See the core loop and flow.' },
                { type: 'image', src: '/media/graphics/SignForHH.png', link: 'pages/contact.html', title: 'Contact Us', desc: 'Reach out to the team.' },
            ];

            let current = 0;
            let autoTimer = null;
            const AUTO_MS = 3000;

            const mount = (item) => {
                stage.querySelectorAll('.media').forEach(el => el.remove());
                if (item.type === 'video') {
                    const v = document.createElement('video');
                    v.className = 'media';
                    v.autoplay = true;
                    v.loop = true;
                    v.muted = true;
                    v.playsInline = true;
                    v.setAttribute('playsinline', '');
                    const s = document.createElement('source');
                    s.src = item.src;
                    if (s.src.endsWith('.mp4')) s.type = 'video/mp4';
                    v.appendChild(s);
                    stage.insertBefore(v, nextBtn);
                } else {
                    const img = document.createElement('img');
                    img.className = 'media';
                    img.src = item.src;
                    img.alt = item.title || 'image';
                    stage.insertBefore(img, nextBtn);
                }
            };

            const render = () => {
                const item = items[current];
                mount(item);
                titleEl.textContent = item.title || '';
                descEl.textContent = item.desc || '';
                stage.dataset.link = item.link || '';
            };

            const openCurrent = () => {
                const item = items[current];
                if (!item || !item.link) return;
                // Use SPA navigation by finding the page and setting active
                const target = this.pages.findIndex(p => p.content === item.link);
                if (target >= 0) {
                    this.setActivePage(target);
                } else {
                    window.location.href = item.link;
                }
            };

            const next = (e) => { if (e) e.stopPropagation(); current = (current + 1) % items.length; render(); };
            const prev = (e) => { if (e) e.stopPropagation(); current = (current - 1 + items.length) % items.length; render(); };

            const startAuto = () => {
                stopAuto();
                autoTimer = setInterval(() => next(), AUTO_MS);
            };
            const stopAuto = () => {
                if (autoTimer) { clearInterval(autoTimer); autoTimer = null; }
            };

            stage.addEventListener('click', openCurrent);
            stage.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openCurrent(); } });
            stage.addEventListener('mouseenter', stopAuto);
            stage.addEventListener('mouseleave', startAuto);
            openBtn.addEventListener('click', openCurrent);
            nextBtn.addEventListener('click', next);
            prevBtn.addEventListener('click', prev);

            render();
            startAuto();
        }
    }
    });</script>
</body>
</html>
